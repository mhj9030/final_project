<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="point">
	<select id="selectMypoint" parameterType="map" resultType="Integer">
		select mypoint from(
			select rownum rnum, tb.* from(
				select total mypoint from point 
				where mId=#{mId} and <![CDATA[total<>0]]>
				order by poNum desc
			)tb where rownum=1
		)
	</select>
	
	<select id="selectReserve" parameterType="map" resultType="Integer">
		select sum(point) 
		from point where mId=#{mId} and total=0 and classify='적립'
	</select>
	
	<select id="dataCount" parameterType="map" resultType="Integer">
		select nvl(count(*), 0) from point 
		where mId=#{mId} and <![CDATA[total<>0]]>
	</select>
	
	<select id="selectPointList" parameterType="map" resultType="com.final_project.point.Point">
		select classify, history, to_char(poDate, 'YYYY-MM-DD hh:mm:ss') poDate, point, total 
		from point where mId=#{mId} and <![CDATA[total<>0]]>
	</select>
	
</mapper>